# =============================================================================
# PRE-CHECK CONFIGURATION FILE
# =============================================================================
#
# Defines available pre-upgrade validation checks with metadata.
# Used by backend to present options to frontend and execute selected checks.
#
# MANDATORY CHECKS:
# - device_connectivity: Always runs first to verify device reachability
# - image_availability: Always runs to ensure upgrade image exists
#
# OPTIONAL CHECKS:
# - User selects which checks to run from Configuration tab
#
# AUTHOR: nikos-geranios_vgi
# DATE: 2025-12-05
# VERSION: 2.0.0 - Added mandatory check support
#
# =============================================================================
 
version: "2.0"
last_updated: "2025-12-05"
 
# =============================================================================
# SECTION 1: AVAILABLE PRE-CHECKS
# =============================================================================
 
checks:
  # ---------------------------------------------------------------------------
  # Device Connectivity & Reachability (MANDATORY - ALWAYS RUNS FIRST)
  # ---------------------------------------------------------------------------
  - id: "device_connectivity"
    name: "Device Connectivity & Reachability"
    description: "Verify device is reachable via SSH/NETCONF and credentials are valid"
    category: "connectivity"
    severity: "critical"
    required: true
    enabled_by_default: true
    run_order: 1
    estimated_duration_seconds: 10
    function_name: "check_device_connectivity"
    tooltip: "MANDATORY: Validates basic device access and connectivity. Runs first - if this fails, no other checks run."
 
  # ---------------------------------------------------------------------------
  # Image Availability (MANDATORY - ALWAYS RUNS)
  # ---------------------------------------------------------------------------
  - id: "image_availability"
    name: "Software Image Availability"
    description: "Verify target image exists on device storage"
    category: "storage"
    severity: "critical"
    required: true
    enabled_by_default: true
    run_order: 2
    estimated_duration_seconds: 10
    function_name: "check_image_availability"
    tooltip: "MANDATORY: Confirms the upgrade image is present on the device. Required before upgrade can proceed."
 
  # ---------------------------------------------------------------------------
  # Version Compatibility (OPTIONAL)
  # ---------------------------------------------------------------------------
  - id: "version_compatibility"
    name: "Version Compatibility"
    description: "Validate upgrade/downgrade path compatibility"
    category: "compatibility"
    severity: "critical"
    required: false
    enabled_by_default: false
    run_order: 3
    estimated_duration_seconds: 5
    function_name: "check_version_compatibility"
    tooltip: "OPTIONAL: Ensures safe upgrade path compatibility and validates downgrade scenarios"
 
  # ---------------------------------------------------------------------------
  # Storage Space (OPTIONAL)
  # ---------------------------------------------------------------------------
  - id: "storage_space"
    name: "Storage Space"
    description: "Validate sufficient disk space for upgrade operation"
    category: "storage"
    severity: "critical"
    required: false
    enabled_by_default: false
    run_order: 4
    estimated_duration_seconds: 10
    function_name: "check_storage_space"
    tooltip: "OPTIONAL: Ensures adequate space for installation and temporary files"
 
  # ---------------------------------------------------------------------------
  # Hardware Health (OPTIONAL)
  # ---------------------------------------------------------------------------
  - id: "hardware_health"
    name: "Hardware Health"
    description: "Check power supplies, fans, and temperature sensors"
    category: "hardware"
    severity: "warning"
    required: false
    enabled_by_default: false
    run_order: 5
    estimated_duration_seconds: 15
    function_name: "check_hardware_health"
    tooltip: "OPTIONAL: Validates hardware component health before upgrade"
 
  # ---------------------------------------------------------------------------
  # BGP Stability (OPTIONAL)
  # ---------------------------------------------------------------------------
  - id: "bgp_stability"
    name: "BGP Protocol Stability"
    description: "Verify BGP peers are established and stable"
    category: "routing"
    severity: "warning"
    required: false
    enabled_by_default: false
    run_order: 6
    estimated_duration_seconds: 10
    function_name: "check_bgp_stability"
    tooltip: "OPTIONAL: Ensures BGP routing protocol stability before upgrade"
 
 
# =============================================================================
# SECTION 2: CHECK CATEGORIES
# =============================================================================
 
categories:
  connectivity:
    display_name: "Connectivity"
    icon: "network"
    order: 1
 
  compatibility:
    display_name: "Compatibility"
    icon: "check-circle"
    order: 2
 
  storage:
    display_name: "Storage"
    icon: "hard-drive"
    order: 3
 
  hardware:
    display_name: "Hardware"
    icon: "cpu"
    order: 4
 
  routing:
    display_name: "Routing Protocols"
    icon: "route"
    order: 5
 
  ha:
    display_name: "High Availability"
    icon: "shield"
    order: 6
 
# =============================================================================
# SECTION 3: METADATA
# =============================================================================
 
metadata:
  total_available: 6
  mandatory_checks: 2
  optional_checks: 4
  total_implemented: 6
  default_timeout_seconds: 300
  max_parallel_checks: 5
